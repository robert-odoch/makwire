function updateWindow(){var e=$(window);if(e.width()>767?($(".site-header").load(baseUrl+"makwire/desktop-nav"),$("body").css({paddingTop:"60px"})):($(".site-header").load(baseUrl+"makwire/mobile-nav"),$("body").css({paddingTop:"40px"})),0!=$(".wrapper-lg").not(".nav").length){if(e.width()>767){if(0==$(".suggestions").length){t=baseUrl+"makwire/suggestions";$.get(t,function(e){var t=$.parseHTML(e);$(".suggestions").remove(),$(t).insertAfter("div.main")})}}else $(".suggestions").remove();if(e.width()>971){if(0==$(".col-small").length){var t=baseUrl+"user/chat";$.get(t,function(e){var t=$.parseHTML(e);$(t).insertAfter(".col-large")})}}else $(".col-small").remove()}}function previousMessages(e){e.preventDefault(),$(".chat-content .previous").replaceWith($(loadingIndicator));var t=$(this).attr("href");$.get(t,function(e){var t=$.parseHTML(e);$(".chat-content .loading").remove(),$(t).prependTo(".chat-content")})}function moreNewsFeedTimelineItems(e){e.preventDefault();var t=$(this),a=t.parents("div.more");t.replaceWith($(loadingIndicator));var i=t.attr("href");$.get(i,function(e){var t=$.parseHTML(e);a.replaceWith($(t))})}var baseUrl="http://www.makwire.com/",submittingIndicator="<img src='"+baseUrl+"images/submitting.gif' class='submitting'>",loadingIndicator="<div class='loading'><div><img src='"+baseUrl+"images/loading.gif'><span>&nbsp;Loading...</span></div></div>";updateWindow(),$(window).resize(updateWindow),$('[data-toggle="tooltip"]').tooltip(),$("#status-nav li a").click(function(e){e.preventDefault();var t=$(this),a=t.parents("div.box"),i=a.find("form"),n=i.css("height");n=parseInt(n)+10+"px",a.find(".alert").remove(),i.replaceWith($(loadingIndicator)),a.find(".loading div").css({height:n,paddingTop:"40px"});var s=t.attr("href");$.get(s,function(e){var i=$.parseHTML(e);a.find(".active").removeClass("active"),t.parents("li").addClass("active"),a.find(".loading").remove(),$(i).appendTo(a)})}),$("#update-status").on("submit","form",function(e){var t=$(this);if(!(t.find("input:file").length>0)){e.preventDefault(),t.find("input:submit").attr("disabled",!0),t.find("input:submit").after($(submittingIndicator)),t.find("img.submitting").css({marginLeft:"5px"});var a=t.attr("action");$.post(a,t.serialize(),function(e){t.find("img.submitting").remove();var a=$.parseJSON(e),i=t.find("textarea, input").not(":submit");if(a.error)if(i.is(":file")){var n="<div class='alert alert-danger' role='alert'><span class='fa fa-exclamation-circle'></span>"+a.error+"</div>";$(n).insertBefore(t)}else{t.find("span.error").remove(),i.hasClass("has-error")||i.addClass("has-error");var s=$("<span class='error'>"+a.error+"</span>");i.after(s)}else{$("#status-nav li.active a").trigger("click");var r=$.parseHTML(a.item);$(r).insertAfter($("#update-status"))}})}}),$(".more.post").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href");$.get(a,function(e){t.parents("p").text(e)})}),$("body").on("click",".like",function(e){e.preventDefault();var t=$(this),a=t.attr("href");$.get(a,function(e){var a=$.parseJSON(e);if(t.trigger("blur"),t.find(".fa").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"),parseInt(a.numLikes)>0){var i=t.parents(".footer");t.siblings("a").length>0&&i.find("span.likes").removeClass("hidden");var n=i.find("a.likes");if(n.hasClass("hidden")&&n.removeClass("hidden"),n.text(a.numLikes),a.like){var s=$.parseHTML(a.like),r=$("div.likes");r.siblings(".alert").remove(),r.hasClass("hidden")&&r.removeClass("hidden"),$(s).prependTo(r)}}})}),$(".chat-content").scrollTo("100%",1e3),$(".new-message").find(":input:text").focus(),$("body").on("click","a.send-message",function(e){if(!($(window).width()<972)){e.preventDefault(),$(".active-users").replaceWith($(loadingIndicator));var t=$(this).attr("href");$(".col-small").load(t,function(){$(".col-small .chat-content").scrollTo("100%",1e3),$(".new-message").find(":input:text").focus(),$('[data-toggle="tooltip"]').tooltip()})}}),$("body").on("submit","form.send-message",function(e){e.preventDefault();var t=$(this),a=t.find(":input:text");if(0==a.val().length)a.addClass("has-error"),t.children("span.error").remove(),t.append("<span class='error'>Message can't be empty!</span>"),$(".chat-content").scrollTo("100%",1e3);else{var i=$(this).attr("action"),n=$(this).serialize();$.post(i,n,function(e){a.val("");var t=$.parseHTML(e);$(t).insertBefore(".chat-content .new-message"),$(".chat-content").scrollTo("100%",1e3)})}a.focus()}),$("body").on("click",".refresh-chat",function(e){e.preventDefault(),$(loadingIndicator).insertBefore(".chat-content .new-message");var t=$(this).attr("href");$.get(t,function(e){var t=$.parseHTML(e);$(".chat-content .loading").remove(),null!==t&&($(t).insertBefore(".chat-content .new-message"),$(".chat-content").scrollTo("100%",1e3)),$(".new-message").find(":input:text").focus()})}),$("body").on("click",".chat-content .previous",previousMessages),$("body").on("click",".col-small .previous",previousMessages),$("body").on("click",".col-small .back-btn",function(e){e.preventDefault();var t=$(".col-small");t.empty(),$(loadingIndicator).prependTo(t);var a=$(this).attr("href");$.get(a,function(e){var a=$.parseHTML(e);t.replaceWith($(a))})}),$(".more").on("click",".timeline",moreNewsFeedTimelineItems),$(".more").on("click",".news-feed",moreNewsFeedTimelineItems);
